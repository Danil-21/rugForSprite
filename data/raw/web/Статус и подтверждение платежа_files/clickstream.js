!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(self,(function(){return(()=>{var t={807:t=>{var e={};t.exports=e;var r={};e.encode=function(t,e,r){if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(t instanceof Uint8Array){var a=0,i=e.length,o=e.charAt(0),s=[0];for(a=0;a<t.length;++a){for(var u=0,h=t[a];u<s.length;++u)h+=s[u]<<8,s[u]=h%i,h=h/i|0;for(;h>0;)s.push(h%i),h=h/i|0}for(a=0;0===t[a]&&a<t.length-1;++a)n+=o;for(a=s.length-1;a>=0;--a)n+=e[s[a]]}else n=function(t,e){var r=0,n=e.length,a=e.charAt(0),i=[0];for(r=0;r<t.length();++r){for(var o=0,s=t.at(r);o<i.length;++o)s+=i[o]<<8,i[o]=s%n,s=s/n|0;for(;s>0;)i.push(s%n),s=s/n|0}var u="";for(r=0;0===t.at(r)&&r<t.length()-1;++r)u+=a;for(r=i.length-1;r>=0;--r)u+=e[i[r]];return u}(t,e);if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join("\r\n")}return n},e.decode=function(t,e){if("string"!=typeof t)throw new TypeError('"input" must be a string.');if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');var n=r[e];if(!n){n=r[e]=[];for(var a=0;a<e.length;++a)n[e.charCodeAt(a)]=a}t=t.replace(/\s/g,"");var i=e.length,o=e.charAt(0),s=[0];for(a=0;a<t.length;a++){var u=n[t.charCodeAt(a)];if(void 0===u)return;for(var h=0,f=u;h<s.length;++h)f+=s[h]*i,s[h]=255&f,f>>=8;for(;f>0;)s.push(255&f),f>>=8}for(var d=0;t[d]===o&&d<t.length-1;++d)s.push(0);return"undefined"!=typeof Buffer?Buffer.from(s.reverse()):new Uint8Array(s.reverse())}},832:t=>{t.exports={options:{usePureJavaScript:!1}}},991:(t,e,r)=>{var n=r(832);t.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},668:(t,e,r)=>{var n=r(832);r(991),r(116);var a=t.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=a,a.create=function(){o||(i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),64),s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0);var t=null,e=n.util.createBuffer(),r=new Array(64),a={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];for(var r=a.messageLengthSize/4,i=0;i<r;++i)a.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},a}};return a.start(),a.update=function(i,o){"utf8"===o&&(i=n.util.encodeUtf8(i));var s=i.length;a.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var h=a.fullMessageLength.length-1;h>=0;--h)a.fullMessageLength[h]+=s[1],s[1]=s[0]+(a.fullMessageLength[h]/4294967296>>>0),a.fullMessageLength[h]=a.fullMessageLength[h]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),u(t,r,e),(e.read>2048||0===e.length())&&e.compact(),a},a.digest=function(){var o=n.util.createBuffer();o.putBytes(e.bytes());var s,h=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize&a.blockLength-1;o.putBytes(i.substr(0,a.blockLength-h));for(var f=8*a.fullMessageLength[0],d=0;d<a.fullMessageLength.length-1;++d)f+=(s=8*a.fullMessageLength[d+1])/4294967296>>>0,o.putInt32(f>>>0),f=s>>>0;o.putInt32(f);var c={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};u(c,r,o);var l=n.util.createBuffer();return l.putInt32(c.h0),l.putInt32(c.h1),l.putInt32(c.h2),l.putInt32(c.h3),l.putInt32(c.h4),l.putInt32(c.h5),l.putInt32(c.h6),l.putInt32(c.h7),l},a};var i=null,o=!1,s=null;function u(t,e,r){for(var n,a,i,o,u,h,f,d,c,l,g,p,y,m=r.length();m>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=((n=e[u-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,a=((a=e[u-15])>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,e[u]=n+e[u-7]+a+e[u-16]|0;for(h=t.h0,f=t.h1,d=t.h2,c=t.h3,l=t.h4,g=t.h5,p=t.h6,y=t.h7,u=0;u<64;++u)i=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),o=h&f|d&(h^f),n=y+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(p^l&(g^p))+s[u]+e[u],y=p,p=g,g=l,l=c+n>>>0,c=d,d=f,f=h,h=n+(a=i+o)>>>0;t.h0=t.h0+h|0,t.h1=t.h1+f|0,t.h2=t.h2+d|0,t.h3=t.h3+c|0,t.h4=t.h4+l|0,t.h5=t.h5+g|0,t.h6=t.h6+p|0,t.h7=t.h7+y|0,m-=64}}},116:(t,e,r)=>{var n=r(832),a=r(807),i=t.exports=n.util=n.util||{};function o(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function s(t){if(this.data="",this.read=0,"string"==typeof t)this.data=t;else if(i.isArrayBuffer(t)||i.isArrayBufferView(t))if("undefined"!=typeof Buffer&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(t){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof s||"object"==typeof t&&"string"==typeof t.data&&"number"==typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}!function(){if("undefined"!=typeof process&&process.nextTick&&!process.browser)return i.nextTick=process.nextTick,void("function"==typeof setImmediate?i.setImmediate=setImmediate:i.setImmediate=i.nextTick);if("function"==typeof setImmediate)return i.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(i.nextTick=function(t){return setImmediate(t)});if(i.setImmediate=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var t="forge.setImmediate",e=[];i.setImmediate=function(r){e.push(r),1===e.length&&window.postMessage(t,"*")},window.addEventListener("message",(function(r){if(r.source===window&&r.data===t){r.stopPropagation();var n=e.slice();e.length=0,n.forEach((function(t){t()}))}}),!0)}if("undefined"!=typeof MutationObserver){var r=Date.now(),n=!0,a=document.createElement("div");e=[],new MutationObserver((function(){var t=e.slice();e.length=0,t.forEach((function(t){t()}))})).observe(a,{attributes:!0});var o=i.setImmediate;i.setImmediate=function(t){Date.now()-r>15?(r=Date.now(),o(t)):(e.push(t),1===e.length&&a.setAttribute("a",n=!n))}}i.nextTick=i.setImmediate}(),i.isNodejs="undefined"!=typeof process&&process.versions&&process.versions.node,i.globalScope=i.isNodejs?r.g:"undefined"==typeof self?window:self,i.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i.isArrayBuffer=function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer},i.isArrayBufferView=function(t){return t&&i.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},i.ByteBuffer=s,i.ByteStringBuffer=s,i.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},i.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},i.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},i.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},i.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this},i.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},i.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(i.encodeUtf8(t))},i.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},i.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},i.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},i.ByteStringBuffer.prototype.putInt=function(t,e){o(e);var r="";do{e-=8,r+=String.fromCharCode(t>>e&255)}while(e>0);return this.putBytes(r)},i.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},i.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},i.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},i.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},i.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},i.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},i.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},i.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},i.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},i.ByteStringBuffer.prototype.getInt=function(t){o(t);var e=0;do{e=(e<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return e},i.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},i.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},i.ByteStringBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},i.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},i.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},i.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},i.ByteStringBuffer.prototype.copy=function(){var t=i.createBuffer(this.data);return t.read=this.read,t},i.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},i.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},i.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},i.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t},i.ByteStringBuffer.prototype.toString=function(){return i.decodeUtf8(this.bytes())},i.DataBuffer=function(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=i.isArrayBuffer(t),n=i.isArrayBufferView(t);if(r||n)return this.data=r?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)},i.DataBuffer.prototype.length=function(){return this.write-this.read},i.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},i.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this},i.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},i.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this},i.DataBuffer.prototype.putBytes=function(t,e){if(i.isArrayBufferView(t)){var r=(n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(i.isArrayBuffer(t)){var n=new Uint8Array(t);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(t instanceof i.DataBuffer||"object"==typeof t&&"number"==typeof t.read&&"number"==typeof t.write&&i.isArrayBufferView(t.data))return n=new Uint8Array(t.data.byteLength,t.read,t.length()),this.accommodate(n.byteLength),new Uint8Array(t.data.byteLength,this.write).set(n),this.write+=n.byteLength,this;if(t instanceof i.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"==typeof t){var a;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.hex.decode(t,a,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),a=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.base64.decode(t,a,this.write),this;if("utf8"===e&&(t=i.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.raw.decode(a),this;if("utf16"===e)return this.accommodate(2*t.length),a=new Uint16Array(this.data.buffer,this.write),this.write+=i.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},i.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},i.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},i.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},i.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},i.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},i.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},i.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},i.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},i.DataBuffer.prototype.putInt=function(t,e){o(e),this.accommodate(e/8);do{e-=8,this.data.setInt8(this.write++,t>>e&255)}while(e>0);return this},i.DataBuffer.prototype.putSignedInt=function(t,e){return o(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)},i.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},i.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},i.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},i.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},i.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},i.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},i.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},i.DataBuffer.prototype.getInt=function(t){o(t);var e=0;do{e=(e<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return e},i.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},i.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},i.DataBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},i.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},i.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},i.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},i.DataBuffer.prototype.copy=function(){return new i.DataBuffer(this)},i.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},i.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},i.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},i.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t},i.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if("binary"===(t=t||"utf8")||"raw"===t)return i.binary.raw.encode(e);if("hex"===t)return i.binary.hex.encode(e);if("base64"===t)return i.binary.base64.encode(e);if("utf8"===t)return i.text.utf8.decode(e);if("utf16"===t)return i.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},i.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=i.encodeUtf8(t)),new i.ByteBuffer(t)},i.fillString=function(t,e){for(var r="";e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return r},i.xorBytes=function(t,e,r){for(var n="",a="",i="",o=0,s=0;r>0;--r,++o)a=t.charCodeAt(o)^e.charCodeAt(o),s>=10&&(n+=i,i="",s=0),i+=String.fromCharCode(a),++s;return n+i},i.hexToBytes=function(t){var e="",r=0;for(!0&t.length&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},i.bytesToHex=function(t){return i.createBuffer(t).toHex()},i.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],f="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";i.encode64=function(t,e){for(var r,n,a,i="",o="",s=0;s<t.length;)r=t.charCodeAt(s++),n=t.charCodeAt(s++),a=t.charCodeAt(s++),i+=u.charAt(r>>2),i+=u.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=u.charAt((15&n)<<2|a>>6),i+=isNaN(a)?"=":u.charAt(63&a)),e&&i.length>e&&(o+=i.substr(0,e)+"\r\n",i=i.substr(e));return o+i},i.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,r,n,a,i="",o=0;o<t.length;)e=h[t.charCodeAt(o++)-43],r=h[t.charCodeAt(o++)-43],n=h[t.charCodeAt(o++)-43],a=h[t.charCodeAt(o++)-43],i+=String.fromCharCode(e<<2|r>>4),64!==n&&(i+=String.fromCharCode((15&r)<<4|n>>2),64!==a&&(i+=String.fromCharCode((3&n)<<6|a)));return i},i.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},i.decodeUtf8=function(t){return decodeURIComponent(escape(t))},i.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:a.encode,decode:a.decode}},i.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},i.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length));for(var a=r=r||0,i=0;i<t.length;++i)n[a++]=t.charCodeAt(i);return e?a-r:n},i.binary.hex.encode=i.bytesToHex,i.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2)));var a=0,i=r=r||0;for(1&t.length&&(a=1,n[i++]=parseInt(t[0],16));a<t.length;a+=2)n[i++]=parseInt(t.substr(a,2),16);return e?i-r:n},i.binary.base64.encode=function(t,e){for(var r,n,a,i="",o="",s=0;s<t.byteLength;)r=t[s++],n=t[s++],a=t[s++],i+=u.charAt(r>>2),i+=u.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=u.charAt((15&n)<<2|a>>6),i+=isNaN(a)?"=":u.charAt(63&a)),e&&i.length>e&&(o+=i.substr(0,e)+"\r\n",i=i.substr(e));return o+i},i.binary.base64.decode=function(t,e,r){var n,a,i,o,s=e;s||(s=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var u=0,f=r=r||0;u<t.length;)n=h[t.charCodeAt(u++)-43],a=h[t.charCodeAt(u++)-43],i=h[t.charCodeAt(u++)-43],o=h[t.charCodeAt(u++)-43],s[f++]=n<<2|a>>4,64!==i&&(s[f++]=(15&a)<<4|i>>2,64!==o&&(s[f++]=(3&i)<<6|o));return e?f-r:s.subarray(0,f)},i.binary.base58.encode=function(t,e){return i.binary.baseN.encode(t,f,e)},i.binary.base58.decode=function(t,e){return i.binary.baseN.decode(t,f,e)},i.text={utf8:{},utf16:{}},i.text.utf8.encode=function(t,e,r){t=i.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length));for(var a=r=r||0,o=0;o<t.length;++o)n[a++]=t.charCodeAt(o);return e?a-r:n},i.text.utf8.decode=function(t){return i.decodeUtf8(String.fromCharCode.apply(null,t))},i.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(2*t.length));for(var a=new Uint16Array(n.buffer),i=r=r||0,o=r,s=0;s<t.length;++s)a[o++]=t.charCodeAt(s),i+=2;return e?i-r:n},i.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},i.deflate=function(t,e,r){if(e=i.decode64(t.deflate(i.encode64(e)).rval),r){var n=2;32&e.charCodeAt(1)&&(n=6),e=e.substring(n,e.length-4)}return e},i.inflate=function(t,e,r){var n=t.inflate(i.encode64(e)).rval;return null===n?null:i.decode64(n)};var d=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(null===r?n=t.removeItem(e):(r=i.encode64(JSON.stringify(r)),n=t.setItem(e,r)),void 0!==n&&!0!==n.rval){var a=new Error(n.error.message);throw a.id=n.error.id,a.name=n.error.name,a}},c=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(i.decode64(r))),r},l=function(t,e,r,n){var a=c(t,e);null===a&&(a={}),a[r]=n,d(t,e,a)},g=function(t,e,r){var n=c(t,e);return null!==n&&(n=r in n?n[r]:null),n},p=function(t,e,r){var n=c(t,e);if(null!==n&&r in n){delete n[r];var a=!0;for(var i in n){a=!1;break}a&&(n=null),d(t,e,n)}},y=function(t,e){d(t,e,null)},m=function(t,e,r){var n,a=null;void 0===r&&(r=["web","flash"]);var i=!1,o=null;for(var s in r){n=r[s];try{if("flash"===n||"both"===n){if(null===e[0])throw new Error("Flash local storage not available.");a=t.apply(this,e),i="flash"===n}"web"!==n&&"both"!==n||(e[0]=localStorage,a=t.apply(this,e),i=!0)}catch(t){o=t}if(i)break}if(!i)throw o;return a};i.setItem=function(t,e,r,n,a){m(l,arguments,a)},i.getItem=function(t,e,r,n){return m(g,arguments,n)},i.removeItem=function(t,e,r,n){m(p,arguments,n)},i.clearItems=function(t,e,r){m(y,arguments,r)},i.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},i.format=function(t){for(var e,r,n=/%./g,a=0,i=[],o=0;e=n.exec(t);){(r=t.substring(o,n.lastIndex-2)).length>0&&i.push(r),o=n.lastIndex;var s=e[0][1];switch(s){case"s":case"o":a<arguments.length?i.push(arguments[1+a++]):i.push("<?>");break;case"%":i.push("%");break;default:i.push("<%"+s+"?>")}}return i.push(t.substring(o)),i.join("")},i.formatNumber=function(t,e,r,n){var a=t,i=isNaN(e=Math.abs(e))?2:e,o=void 0===r?",":r,s=void 0===n?".":n,u=a<0?"-":"",h=parseInt(a=Math.abs(+a||0).toFixed(i),10)+"",f=h.length>3?h.length%3:0;return u+(f?h.substr(0,f)+s:"")+h.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+s)+(i?o+Math.abs(a-h).toFixed(i).slice(2):"")},i.formatSize=function(t){return t>=1073741824?i.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?i.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?i.formatNumber(t/1024,0)+" KiB":i.formatNumber(t,0)+" bytes"},i.bytesFromIP=function(t){return-1!==t.indexOf(".")?i.bytesFromIPv4(t):-1!==t.indexOf(":")?i.bytesFromIPv6(t):null},i.bytesFromIPv4=function(t){if(4!==(t=t.split(".")).length)return null;for(var e=i.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()},i.bytesFromIPv6=function(t){for(var e=0,r=2*(8-(t=t.split(":").filter((function(t){return 0===t.length&&++e,!0}))).length+e),n=i.createBuffer(),a=0;a<8;++a)if(t[a]&&0!==t[a].length){var o=i.hexToBytes(t[a]);o.length<2&&n.putByte(0),n.putBytes(o)}else n.fillWithByte(0,r),r=0;return n.getBytes()},i.bytesToIP=function(t){return 4===t.length?i.bytesToIPv4(t):16===t.length?i.bytesToIPv6(t):null},i.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")},i.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],r=[],n=0,a=0;a<t.length;a+=2){for(var o=i.bytesToHex(t[a]+t[a+1]);"0"===o[0]&&"0"!==o;)o=o.substr(1);if("0"===o){var s=r[r.length-1],u=e.length;s&&u===s.end+1?(s.end=u,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:u,end:u})}e.push(o)}if(r.length>0){var h=r[n];h.end-h.start>0&&(e.splice(h.start,h.end-h.start+1,""),0===h.start&&e.unshift(""),7===h.end&&e.push(""))}return e.join(":")},i.estimateCores=function(t,e){if("function"==typeof t&&(e=t,t={}),t=t||{},"cores"in i&&!t.update)return e(null,i.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return i.cores=navigator.hardwareConcurrency,e(null,i.cores);if("undefined"==typeof Worker)return i.cores=1,e(null,i.cores);if("undefined"==typeof Blob)return i.cores=2,e(null,i.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(t){for(var e=Date.now(),r=e+4;Date.now()<r;);self.postMessage({st:e,et:r})}))}.toString(),")()"],{type:"application/javascript"}));!function t(n,a,o){if(0===a){var s=Math.floor(n.reduce((function(t,e){return t+e}),0)/n.length);return i.cores=Math.max(1,s),URL.revokeObjectURL(r),e(null,i.cores)}!function(t,e){for(var n=[],a=[],i=0;i<t;++i){var o=new Worker(r);o.addEventListener("message",(function(r){if(a.push(r.data),a.length===t){for(var i=0;i<t;++i)n[i].terminate();e(0,a)}})),n.push(o)}for(i=0;i<t;++i)n[i].postMessage(i)}(o,(function(e,r){n.push(function(t,e){for(var r=[],n=0;n<t;++n)for(var a=e[n],i=r[n]=[],o=0;o<t;++o)if(n!==o){var s=e[o];(a.st>s.st&&a.st<s.et||s.st>a.st&&s.st<a.et)&&i.push(o)}return r.reduce((function(t,e){return Math.max(t,e.length)}),0)}(o,r)),t(n,a-1,o)}))}([],5,16)}}},e={};function r(n){var a=e[n];if(void 0!==a)return a.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};return(()=>{"use strict";r.r(n),r.d(n,{changeUrlHandler:()=>it,deleteSessionId:()=>nt,getDeviceId:()=>et,global:()=>Ht,handleUrlChange:()=>xt,hiddenTabHandler:()=>ot,listenTechEvent:()=>Lt,metaUpdater:()=>Bt,preset:()=>Ut,profileUpdater:()=>mt,requestBeacon:()=>Et,requestFetch:()=>ht,requestXhr:()=>Mt,sendEvent:()=>_t,sendSensitiveEvent:()=>$t,sendTechEvent:()=>Rt,setBufferSize:()=>I,setConfig:()=>E,setDeviceId:()=>tt,setDeviceIdUrl:()=>T,setHashAlgorithm:()=>L,setHashSalt:()=>U,setMeta:()=>wt,setProfile:()=>yt,setReportUrl:()=>C,setRequestAdapter:()=>s,setRestRequestAdapter:()=>h,setSessionId:()=>rt,setSessionLifetime:()=>D,setUTMUrlParams:()=>Dt,sha256:()=>kt,warmUpSessionIdHandler:()=>ut});const t=t=>t<10?`0${t}`:t,e=()=>{const e=new Date,r=new Date(e.valueOf()-6e4*e.getTimezoneOffset()),[n]=r.toISOString().split("Z");return`${n}${a=r.getTimezoneOffset(),`${a<0?"+":"-"}${t(Math.abs(Math.floor(a/60)))}:${t(Math.abs(a%60))}`}`;var a},a=()=>Math.floor((new Date).getTime()/1e3);let i,o;const s=t=>{i=t},u=()=>i,h=t=>{o=t},f=()=>o,d="[Clickstream Agent]",c=["click","touch","keydown","scroll"],l=["_ga","_ym_uid","top100_id","tmr_lvid","___dmpkit___"],g=["staticId","idfa","gaid"],p="_sas",y="_sas_custom";let m,v=10,b="",w="",B=6e5;const I=t=>{var e;e=t,Number.isFinite(e)&&Number.isInteger(e)&&e>0&&(v=t)},S=()=>v,C=t=>{b=t},A=()=>b,T=t=>{},L=t=>{m=t},U=t=>{w=t},D=t=>{B=t},x=()=>B,E=({reportUrl:t,deviceIdUrl:e,bufferSize:r,requestAdapter:n,restRequestAdapter:a,hashAlgorithm:i,hashSalt:o,sessionLifetime:u})=>{t&&C(t),e&&T(e),r&&I(r),n&&s(n),a&&h(a),i&&L(i),o&&U(o),u&&D(u)},M=async(t,e=!1)=>{const r=e?f():u();if(!A())throw new Error(`${d} reportUrl is not defined`);if(!(globalThis.navigator?.onLine??1))throw new Error(`${d} Application is offline`);if(!r)throw new Error(`${d} Adapter is not defined`);await r({url:A(),body:t,method:"POST"})},N=(t,e)=>JSON.stringify(t)===JSON.stringify(e),O=[],k=({meta:t,profile:e})=>{O.length&&(t&&O.forEach((e=>{Object.assign(e.meta,t)})),e&&O.forEach((t=>{Object.assign(t.profile,e)})))},j=(t=!1)=>{for(;O.length>Number(!t);){const t=O.shift();t&&M(t).catch((e=>{throw O.unshift(t),e}))}};let P;const _=t=>{const r=O[O.length-1];var n;!r||r.data.length>=S()||!(({meta:{timeStamp:t,...e},profile:r},{meta:{timeStamp:n,...a},profile:i})=>N(e,a)&&N(r,i))(r,t)?(n=t,O.push(n)):((t,r)=>{t?.data.push(r.data[0]),t.meta.timeStamp=e()})(r,t);const a=O[O.length-1];a&&a.data.length>=S()?j(!0):O.length>1?j():(P&&clearTimeout(P),P=setTimeout((()=>{j(!0)}),1e4))},R=(t,e,r)=>{if("string"==typeof globalThis.document?.cookie){const n=[`${t}=${e||""}`,"samesite=strict","path=/"];if(/\.[^\d]/.test(globalThis.location.hostname)&&(n.push(`domain=.${(()=>{const t=globalThis.location.hostname.split(".");return t.length>=2?t.slice(-2).join("."):globalThis.location.hostname})()}`),"https:"===globalThis.location.protocol&&n.push("secure")),r){const t=new Date;t.setTime(t.getTime()+r),n.push(`expires=${t.toUTCString()}`)}globalThis.document.cookie=n.join(";")}},$=t=>{if("string"==typeof globalThis.document?.cookie){const e=new RegExp(`(^|[^;]+)\\s*${t}\\s*=\\s*([^;]+)`).exec(globalThis.document.cookie);return e?e[2]:void 0}},H=[],z=t=>{H.forEach((e=>{e(t)}))},q={eventAction:"first_launch"},W={eventAction:"start_session"},V=t=>{q.deviceId=t,W.deviceId=t,q.timeStamp=e();const r=$(y)||$(p);r&&(q.sessionId=r,z(q))},F=t=>{q.sessionId=t,W.sessionId=t,W.timeStamp=e(),z(q),z(W)},J={getRandomValues:t=>{const e=new Uint8Array([...t]);for(let t=0;t<e.length;t+=1)e[t]=Math.floor(256*Math.random());return e}},K=globalThis.crypto??globalThis.msCrypto??J,X=t=>{const e=Number(t);return(e^Number(K.getRandomValues(new Uint8Array(1))[0])&15>>e/4).toString(16)},Z="_sv",G="_sa",Q=2592e6;let Y;const tt=async(t,e)=>{!$(Z)&&(Y=e({url:t,method:"GET",credentials:!0}).then((t=>{"string"!=typeof t?.id||$(Z)||R(Z,t.id,Q)})).catch((()=>{})).finally((()=>{const t=$(Z);t&&V(t)})))},et=async()=>{try{await Y}catch(t){}return $(Z)||((()=>{if(!$(G)){const t=`SA1.${"10000000-1000-4000-8000-100000000000".replace(/[018]/g,X)}.${String(a())}`;R(G,t,Q),V(t)}})(),$(G))},rt=async t=>{const e=$(y);t&&e!==t&&(R(y,t,x()),F(t));const r=e||$(p);if(r)R(e?y:p,r,x());else{const t=`${await et()??""}.${String(a())}`;R(p,t,x()),F(t)}},nt=()=>{R(y,"",-1)},at=()=>{"hidden"===document.visibilityState&&rt().then((()=>{j(!0)}))},it=()=>{globalThis.addEventListener?.("beforeunload",at)},ot=()=>{globalThis.document?.addEventListener("visibilitychange",at)},st=(t,e=0,r={})=>{const{maxWait:n,leading:a=!1,trailing:i=!0}=r;let o,s,u,h,f,d=0;const c=void 0!==n;function l(e){const r=o,n=s;return o=void 0,s=void 0,d=e,u=t.apply(n,r),u}function g(t){const r=t-f;return void 0===f||r>=e||r<0||c&&t-d>=n}function p(t){return h=void 0,i&&o?l(t):(o=void 0,s=void 0,u)}function y(){const t=Date.now();if(g(t))return p(t);h=setTimeout(y,function(t){const r=t-d,a=e-(t-f);return c?Math.min(a,n-r):a}(t))}function m(...t){const r=Date.now(),n=g(r);if(o=t,s=this,f=r,n){if(void 0===h)return function(t){return d=t,h=setTimeout(y,e),a?l(t):u}(f);if(c)return h=setTimeout(y,e),l(f)}return void 0===h&&(h=setTimeout(y,e)),u}return m.cancel=function(){void 0!==h&&clearTimeout(h),d=0,o=void 0,f=void 0,s=void 0,h=void 0},m.flush=function(){return void 0===h?u:p(Date.now())},m},ut=()=>{const t=((t,e=0,r={})=>{const{leading:n=!0,trailing:a=!0}=r;return st(t,e,{leading:n,maxWait:e,trailing:a})})((()=>{rt()}),5e3,{trailing:!1,leading:!0});c.forEach((e=>{globalThis.document?.addEventListener(e,t)}))},ht=async({url:t,body:e,method:r="POST",credentials:n=!1})=>{const a={method:r,body:e?JSON.stringify(e):void 0,keepalive:!0,credentials:n?"include":"omit"};e&&(a.headers={"Content-Type":"application/json;charset=utf-8"});const i=await fetch(t,a);try{return await i.json()}catch(t){return}},ft={bluetooth:"BLUETOOTH",cellular:"CELLULAR",ethernet:"ETHERNET",wifi:"WIFI",mixed:"UNKNOWN",none:"UNKNOWN",wimax:"UNKNOWN",other:"UNKNOWN",unknown:"UNKNOWN"},dt=(t="",e=255)=>t.length>e?t.substring(0,e):t,ct=t=>{if(null==t)return;const e=t.filter((({value:t})=>"string"==typeof t)).slice(0,128);return e.length?e.map((({key:t,value:e})=>({key:dt(t),value:dt(e)}))):void 0},lt=({entity:t,key:e,value:r})=>{t.customIdentifiers||(t.customIdentifiers=[]);const n={key:e,value:r},a=t.customIdentifiers.find((t=>t.key===e));t.customIdentifiers=a?t.customIdentifiers.map((t=>t.key===e?n:t)):[...t.customIdentifiers,n]},gt=(t,e=!1)=>{const r=dt(t);return m&&e?m(r,w):r},pt={},yt=t=>{Object.assign(pt,{...t,clientBlock:dt(t.clientBlock,64),hashUserLoginId:dt(t.hashUserLoginId),appVersion:dt(t.appVersion,16),...t.adId&&{adId:dt(t.adId)},...t.appId&&{appId:dt(t.appId)},...t.subId&&{subId:dt(t.subId)},...t.sapId&&{sapId:dt(t.sapId)},...t.partnerId&&{partnerId:dt(t.partnerId)}}),k({profile:pt})},mt={setEmail(t,e){return lt({entity:pt,key:"email",value:gt(t,e)}),this},setPhone(t,e){return lt({entity:pt,key:"phoneNumber",value:gt(t,e)}),this},setSbClID(t,e){return lt({entity:pt,key:"sberClientId",value:gt(t,e)}),this},setClientID(t,e){return pt.hashUserLoginId=gt(t,e),this},setProfileID(t,e,r){return lt({entity:pt,key:t,value:gt(e,r)}),this}},vt=async({sessionId:t,deviceId:e})=>{const r=(()=>{const t=[];return l.forEach((e=>{const r=$(e);r&&t.push({key:e,value:dt(r)})})),t.length>0?t:void 0})(),n=(()=>{const t=[];if(!globalThis.location)return null;const e=new URLSearchParams(globalThis.location.search);return 0===e.size?null:(e.forEach(((e,r)=>{if(e){const n=decodeURIComponent(e);t.push({key:r,value:dt(n)})}})),0===t.length?null:t.slice(0,32))})();return{...pt,applicationLanguage:dt(globalThis.document?.documentElement.lang,16),deviceId:e,sessionId:t,...r&&{cookie:r},...n&&{utm:n}}},bt={},wt=t=>{Object.assign(bt,t),k({meta:bt})},Bt={setSbAppID(t,e){return lt({entity:bt,key:"sbApplicationId",value:gt(t,e)}),this},setMetaID(t,e,r){return lt({entity:bt,key:t,value:gt(e,!g.includes(t)&&r)}),this}},It=()=>({...bt,platform:"WEB",screenSize:globalThis.screen?`${globalThis.screen.width}x${globalThis.screen.height}`:void 0,browser:globalThis.navigator?.userAgent,systemLanguage:globalThis.navigator?.language||globalThis.navigator?.userLanguage||globalThis.navigator?.browserLanguage||globalThis.navigator?.systemLanguage||"ru",timeStamp:e()}),St=async(t,r,n)=>{const a=n?.url??(()=>{if(!globalThis.document)return null;const{location:{origin:t,pathname:e}}=globalThis.document;return`${t}${e.length>1?e:""}`})(),i=globalThis.document?globalThis.document.title:null;let o;return"hidden"!==document.visibilityState&&(o=await(async()=>{try{const t=await(globalThis.navigator?.getBattery())||{},{level:e}=t;return"number"==typeof e?String(100*e):void 0}catch(t){return}})()),{eventCategory:dt(t.eventCategory),eventAction:dt(t.eventAction,1024),eventType:r,value:dt(t.value),properties:ct(t.properties),batteryLevel:o,connectionType:ft[globalThis.navigator?.connection?.type??"unknown"],timeStamp:n?.timeStamp||e(),...a&&{url:dt(a)},...i&&{pageName:dt(i)}}},Ct=async(t,e,r)=>{let n=r?.deviceId,a=r?.sessionId;return n||(n=await et()),a||(await rt(),a=$(y)||$(p)),{profile:await vt({sessionId:a,deviceId:n}),meta:It(),data:[await St(t,e,r)]}};function At(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}}const Tt=async t=>{if("timeStamp"in t){const e=await Ct({eventCategory:"cs",value:"",eventAction:t.eventAction},"technical",{timeStamp:t.timeStamp,sessionId:t.sessionId,deviceId:t.deviceId});_(e),delete t.timeStamp}},Lt=At((()=>{var t;t=Tt,H.push(t)})),Ut=At((()=>{s(ht),h(ht),Lt(),ut(),ot(),it(),tt("https://visor.sberbank.ru/get",ht)})),Dt=t=>{},xt=async t=>{const e=await Ct({eventCategory:"cs",value:"",eventAction:"screen_view"},"technical",{url:t});_(e)},Et=({url:t,body:e})=>new Promise(((r,n)=>{const a=new Blob([JSON.stringify(e)],{type:"application/json;charset=utf-8"});navigator.sendBeacon(t,a)?r():n()})),Mt=({url:t,body:e,method:r="POST",credentials:n=!1})=>new Promise(((a,i)=>{const o=new XMLHttpRequest;o.open(r,t,!0),e&&o.setRequestHeader("Content-Type","application/json;charset=utf-8"),n&&(o.withCredentials=!0),o.send(e?JSON.stringify(e):e),o.onreadystatechange=()=>{if(4===o.readyState)if(o.status>=400)i();else try{a(JSON.parse(o.response))}catch(t){a(void 0)}}}));var Nt=r(668),Ot=r.n(Nt);const kt=(t,e)=>{const r=`${t}${e??""}`,n=Ot().create();return n.update(r),n.digest().toHex()},jt=(t,e,r)=>{e&&t.push(r)},Pt=async(t,e,r=!1)=>{const n=await Ct(t,e);(()=>{const t=[];jt(t,!A(),"Не установлена конфигурация reportUrl. Используйте setConfig({ reportUrl }) для определения точки получения данных"),jt(t,!It().apiKey,"Не установлен ключ meta apiKey. Используйте setMeta({ apiKey }) для отправки данных по вашему продукту"),jt(t,!u(),"Не установлен сетевой адаптер. Используйте setConfig({ requestAdapter }) или preset() для установки сетевого адаптера отправки данных"),jt(t,!f(),"Не установлен сетевой адаптер. Используйте setConfig({ restRequestAdapter }) или preset() для установки сетевого адаптера аварийной отправки данных"),t.length&&t.forEach((t=>{console.error(new Error(`${d} ${t}`))}))})(),r?await M(n):_(n)},_t=async t=>{await Pt(t,"business")},Rt=async t=>{await Pt(t,"technical")},$t=async t=>{await Pt(t,"sensitive",!0)},Ht=()=>{globalThis.clickstream||(globalThis.clickstream={setMeta:wt,metaUpdater:Bt,setProfile:yt,profileUpdater:mt,setDeviceId:tt,getDeviceId:et,setSessionId:rt,deleteSessionId:nt,setReportUrl:C,setBufferSize:I,setDeviceIdUrl:T,setRequestAdapter:s,setRestRequestAdapter:h,setHashAlgorithm:L,setHashSalt:U,setSessionLifetime:D,setConfig:E,setUTMUrlParams:Dt,sendEvent:_t,sendSensitiveEvent:$t,sendTechEvent:Rt,listenTechEvent:Lt,changeUrlHandler:it,hiddenTabHandler:ot,warmUpSessionIdHandler:ut,handleUrlChange:xt,preset:Ut,requestBeacon:Et,requestXhr:Mt,requestFetch:ht,sha256:kt})};Ut(),Ht()})(),n})()}));